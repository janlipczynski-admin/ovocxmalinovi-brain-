name: Regression Tests — OvocxMalinovi

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

jobs:
  regression-tests:
    runs-on: ubuntu-latest
    name: Pełny suite testów regresji

    steps:
      - name: Checkout repozytorium
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'

      - name: '[1/9] Smoke testy — dane JS'
        run: node tests/smoke.js

      - name: '[2/9] Dashboard WIG — integralność'
        run: node tests/dashboard.js

      - name: '[3/9] Nawigacja — linki HTML'
        run: node tests/navigation.js

      - name: '[4/9] Regression — ceny i marże'
        run: node tests/regression-prices.js

      - name: '[5/9] Regression — plany ilościowe'
        run: node tests/regression-plan.js

      - name: '[6/9] Regression — dostawcy i mapa kartonów'
        run: node tests/regression-suppliers.js

      - name: '[7/9] Regression — stany magazynowe'
        run: node tests/regression-inventory.js

      - name: '[8/9] Regression — spójność między plikami'
        run: node tests/regression-crossfile.js

      - name: '[9/9] Regression — dashboard rozszerzony'
        run: node tests/regression-crossfile-dashboard.js

      - name: Podsumowanie
        if: success()
        run: |
          echo ""
          echo "████████████████████████████████████████████████████████"
          echo "  ✅  Wszystkie 9 suite'ów przeszły                     "
          echo "████████████████████████████████████████████████████████"
          echo ""
